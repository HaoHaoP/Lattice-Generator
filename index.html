<!DOCTYPE html>

<html>

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script src="js/html2canvas.min.js"></script>
<script src="js/rgbcolor.js"></script> 
<script src="js/canvg.js"></script> 

<title></title>

<meta charset="utf-8" />

<div id="capture" style="padding: 10px; background: #f5da55">
    <h4 style="color: #000; ">Hello world!</h4>
</div>


<script>

//选取颜色
var color1 = "#ffcccc";  //
var color2 = "#b3ccff";
var color3 = "#e5ffe5";  //背景色

//每个颜色，随机生成几条线
var number1 = Math.random();
numbercolor1 = Math.ceil(number1 * 3);
var number2 = Math.random();
numbercolor2 = Math.ceil(number2 * 3);
//document.write(number1);


//生成随机位置，可以多次实验
var x1 = 20;
var x2 = 50;
var x3 = 90;

//宽度也随机
var width1 = 20;
var width2 = 30;
var width2 = 60;

	function onLoad(){
		var mysvg = document.getElementById("svg_my");


/*		
		var rectObj1 = document.createElementNS("http://www.w3.org/2000/svg","rect");
		var rectObj1H = document.createElementNS("http://www.w3.org/2000/svg","rect");
		if(rectObj1){
			rectObj1.setAttribute("width",width1);
			rectObj1.setAttribute("height",200);
			rectObj1.setAttribute('x', x1);
			//rectObj.setAttribute("style","fill:rgb(0,0,255);stroke-width:1;stroke:rgb(0,0,0)");
			rectObj1.setAttribute("style","fill:"+color1+";stroke-width:1;stroke:"+color1);  //color 1
			mysvg.appendChild(rectObj1);
			//alert("hello");

            //竖着
			rectObj1H.setAttribute("width",200);
			rectObj1H.setAttribute("height",width1);
			rectObj1H.setAttribute('y', x1);
			//rectObj.setAttribute("style","fill:rgb(0,0,255);stroke-width:1;stroke:rgb(0,0,0)");
			rectObj1H.setAttribute("style","fill:"+color1+";stroke-width:1;stroke:"+color1);  //color 1
			mysvg.appendChild(rectObj1H);
		}


		var mysvg2 = document.getElementById("svg_my");
		var rectObj2 = document.createElementNS("http://www.w3.org/2000/svg","rect");
		var rectObj2H = document.createElementNS("http://www.w3.org/2000/svg","rect");
		if(rectObj2){
			rectObj2.setAttribute("width",width2);
			rectObj2.setAttribute("height",200);
			rectObj2.setAttribute('x', x2);
			//rectObj.setAttribute("style","fill:rgb(0,0,255);stroke-width:1;stroke:rgb(0,0,0)");
			rectObj2.setAttribute("style","fill:"+color2+";stroke-width:1;stroke:"+color2);  //color 1
			mysvg2.appendChild(rectObj2);
			//alert("hello");

			//竖着
			rectObj2H.setAttribute("width",200);
			rectObj2H.setAttribute("height",width2);
			rectObj2H.setAttribute('y', x2);
			//rectObj.setAttribute("style","fill:rgb(0,0,255);stroke-width:1;stroke:rgb(0,0,0)");
			rectObj2H.setAttribute("style","fill:"+color2+";stroke-width:1;stroke:"+color2);  //color 1
			mysvg.appendChild(rectObj2H);
		}


*/
        //背景色
		var rectObj0 = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
		rectObj0.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#petal');
		rectObj0.setAttribute("width",200);
		rectObj0.setAttribute("height",200);
		 rectObj0.setAttribute("style","fill:"+color1+";stroke-width:1;stroke:"+color1);  //color 1
         document.querySelector('svg').appendChild(rectObj0);



        //横纹

        //颜色1
		var rectObj1Array =   new Array(); //动态数组记录横纹位置

		for (var i = 1; i <= numbercolor1; i += 1) {
        var rectObj1 = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
		rectObj1.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#petal');
		rectObj1.setAttribute("width",200);
		var temph = Math.ceil(Math.random()*50);
		rectObj1.setAttribute("height",temph);
		 

         var tempy = Math.ceil(Math.random()*200);
		 rectObj1.setAttribute('y',tempy );

		 console.log("哎呀，被记录了",temph,tempy);
         rectObj1Array.push([temph,tempy]);

		 rectObj1.setAttribute("style","fill:"+color2+";stroke-width:1;stroke:"+color2);  //color 2
         document.querySelector('svg').appendChild(rectObj1);
         }

		 console.log("哎呀，记录好了",rectObj1Array);

	    //颜色2
		var rectObj2Array =   new Array(); //动态数组记录横纹位置
		for (var i = 1; i <= numbercolor1; i += 1) {
        var rectObj2 = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
		rectObj2.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#petal');
		rectObj2.setAttribute("width",200);

		var temph = Math.ceil(Math.random()*50);
		rectObj2.setAttribute("height",temph);

		 var tempy = Math.ceil(Math.random()*200);
		 rectObj2.setAttribute('y', tempy);

		 console.log("哎呀，被记录了",temph,tempy);
         rectObj2Array.push([temph,tempy]);


		 rectObj2.setAttribute("style","fill:"+color3+";stroke-width:1;stroke:"+color3);  //color 3
         document.querySelector('svg').appendChild(rectObj2);
         }

		 console.log("哎呀，记录好了",rectObj2Array);


        //竖纹-需要底色

		 //颜色1
		 for (var i = 1; i <= numbercolor1; i += 1) {
        var rectObj3 = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
		rectObj3.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#petal');
		rectObj3.setAttribute("height",200);

		console.log("抽出来了",rectObj1Array[i-1][0]);
		rectObj3.setAttribute("width",rectObj1Array[i-1][0]);
		 
		 rectObj3.setAttribute('x', rectObj1Array[i-1][1]);
		 rectObj3.setAttribute("style","fill:"+color2+";stroke-width:1;stroke:"+color2);  //color 2
         document.querySelector('svg').appendChild(rectObj3);
         }

	    //颜色2
		for (var i = 1; i <= numbercolor1; i += 1) {
        var rectObj4 = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
		rectObj4.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#petal');
		rectObj4.setAttribute("height",200);

		console.log("抽出来了",rectObj2Array[i-1][0]);
		rectObj4.setAttribute("width",rectObj2Array[i-1][0]);
		
		 rectObj4.setAttribute('x', rectObj2Array[i-1][1]);
		 rectObj4.setAttribute("style","fill:"+color3+";stroke-width:1;stroke:"+color3);  //color 3
         document.querySelector('svg').appendChild(rectObj4);
         }


         //像素化
		
         

		//蒙版  -显示白色的区域 不显示黑色的区域  进行图像计算  ，不转jpg 直接对svg修改/或者重新生成/控制像素canvas？背景色线条line
		//【定义一个方阵矩阵】  蒙版蒙在横纹上  矩阵计算  对横纹填充图案 https://www.douban.com/group/topic/172691860/?author=1
		//对每个像素填充吗？ 其实就是对横纹的剪贴蒙版  消除黑纹区域的图案

	}
	window.onload = onLoad;
</script>


</head>

<body style="text-align:center;background-color: bisque；padding-top:100px;">

<h5>hello word</h5>

<form action="form_action.asp" method="get">
    First name: <input type="text" name="fname" />
    Last name: <input type="text" name="lname" />
    <input type="submit" value="Submit" />
  </form>

<div id="div1" >

？？？？？这啥玩意儿啊

<svg id="svg_my" style="border:1px solid #000;width:200px;height:200px" version="1.1" xmlns="http://www.w3.org/2000/svg">
		
</svg>

<canvas id="canvas" width="1000px" height="600px"></canvas> 

<script>
	//svg转png  canvg html2canvas
	html2canvas(document.querySelector("#div1")).then(canvas => 
	{document.body.appendChild(canvas)});   

// 	window.onload = function() {

// 		var  svgHtml=document.getElementById("svg_my").innerHTML.trim();
//             var canvasId=document.getElementById("canvas");
//             canvg(canvasId,svgHtml);
//   //canvg(document.getElementById('svg_my'), '<svg>...</svg>')

// }

	
</script>

</div>



</body>

</html>

